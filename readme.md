# π“΅ WebSocket μ±„λ„ μ±„ν… μ‹μ¤ν… λ¬Έμ„

μ΄ μ‹μ¤ν…μ€ WebSocket κΈ°λ°μ μ„λ²„(`SocketChat-Server.mjs`)μ™€ ν΄λΌμ΄μ–ΈνΈ(`SocketChat-Client.mjs`)λ΅ κµ¬μ„±λμ–΄ μμΌλ©°, λ‹¨μΌ μ±„λ„ λλ” λ©€ν‹° μ±„λ„ λ¨λ“λ¥Ό μ§€μ›ν•λ©° μΈμ¦ κΈ°λ° λ©”μ‹μ§€ μ†΅μμ‹ μ„ μ κ³µν•©λ‹λ‹¤.

---

## π“ νμΌ κµ¬μ„±

- `SocketChat-Server.mjs` β€“ WebSocket μ„λ²„ λ¨λ“ (μ±„λ„, μΈμ¦, λ©”μ‹μ§€ λΈλ΅λ“μΊμ¤νΈ κ΄€λ¦¬)
- `SocketChat-Client.mjs` β€“ ν΄λΌμ΄μ–ΈνΈ λ¨λ“ (μ„λ²„ μ—°κ²°, λ©”μ‹μ§€ μμ‹ /μ „μ†΅ μ²λ¦¬)

---

## π–¥οΈ `SocketChat-Server.mjs` μ„¤λ…μ„

### π“¦ λ¨λ“ κ°μ”

μ΄ λ¨λ“μ€ WebSocketμ„ ν†µν•΄ μ±„ν… μ„λ²„λ¥Ό κµ¬μ¶•ν•λ©° λ‹¤μ κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤:

- λ‹¨μΌ / λ©€ν‹° μ±„λ„ λ¨λ“ μ„ νƒ κ°€λ¥
- μ±„λ„λ³„ λ©”μ‹μ§€ λΈλ΅λ“μΊμ¤νΈ
- λ§μ§€λ§‰ λ©”μ‹μ§€ μ €μ¥ κΈ°λ¥
- μΈμ¦ ν‚¤ κΈ°λ° λ©”μ‹μ§€ μ²λ¦¬

---

### β™οΈ λ‚΄λ³΄λ‚΄λ” ν•¨μ

#### `setSingle()`

- λ‹¨μΌ μ±„λ„ λ¨λ“λ΅ μ„¤μ •ν•©λ‹λ‹¤.
- `listen()` μ΄ν›„μ—λ” λ³€κ²½ν•  μ μ—†μµλ‹λ‹¤.

#### `setMultiChannel(count: number)`

- λ©€ν‹° μ±„λ„ λ¨λ“λ΅ μ„¤μ •ν•©λ‹λ‹¤.
- `count`λ” 1 μ΄μƒμ μ •μμ—¬μ•Ό ν•©λ‹λ‹¤.

#### `listen(port: number, key: string)`

- μ„λ²„λ¥Ό μ£Όμ–΄μ§„ ν¬νΈμ—μ„ μ‹¤ν–‰ν•λ©°, μΈμ¦ ν‚¤λ¥Ό μ„¤μ •ν•©λ‹λ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” μ΄ ν‚¤λ¥Ό μ”μ²­μ— ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤.

#### `stop()`

- μ„λ²„λ” λ™μ‘ μ¤‘μ΄λ‚ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ€ λ¬΄μ‹ν•©λ‹λ‹¤.

#### `start()`

- μ„λ²„κ°€ λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ μλ½ν•©λ‹λ‹¤.

#### `getMessage(channel?: number): { als, msg } | null`

- νΉμ • μ±„λ„μ λ§μ§€λ§‰ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.
- λ‹¨μΌ μ±„λ„ λ¨λ“μ—μ„λ” `channel` μΈμλ¥Ό μƒλµν•κ±°λ‚ `null`λ΅ μ „λ‹¬ν•©λ‹λ‹¤.

```json
{
  "als": "λ³„λ…",
  "msg": "λ©”μ‹μ§€ λ‚΄μ©"
}
```

#### `sendMessage(channel: number, alias: string, content: string): boolean`

- μ„λ²„κ°€ νΉμ • μ±„λ„μ— μ§μ ‘ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.

---

### π“¥ ν΄λΌμ΄μ–ΈνΈ λ©”μ‹μ§€ ν•μ‹

```json
{
  "typ": "sed",
  "key": "μΈμ¦ν‚¤",
  "cot": "λ©”μ‹μ§€λ‚΄μ©",
  "als": "λ³„λ…"
}
```

---

### β— μ„λ²„ μ—λ¬ μ‘λ‹µ ν•μ‹

```json
{
  "typ": "err",
  "code": "μ—λ¬μ½”λ“",
  "msg": "μ—λ¬ λ©”μ‹μ§€"
}
```

| μ½”λ“ | μ„¤λ… |
|------|------|
| `100/1` | μΈμ¦ ν‚¤ λ¶μΌμΉ |
| `100/2` | JSON νμ‹± μ‹¤ν¨ λλ” ν•„λ“ λ„λ½ |
| `100/3` | μ§€μ›ν•μ§€ μ•λ” μ”μ²­ νƒ€μ… |
| `110/1` | μ„λ²„κ°€ μ”μ²­μ„ μ²λ¦¬ν•μ§€ μ•μ |
| `110/2` | λ‚΄λ¶€ μ„λ²„ μ¤λ¥ |

---

### β… νΉμ§• μ”μ•½

- λ‹¨μΌ λλ” λ©€ν‹° μ±„λ„ λ¨λ“ μ„ νƒ κ°€λ¥
- λ§μ§€λ§‰ λ©”μ‹μ§€ μ €μ¥ λ° μ „λ‹¬
- μΈμ¦ κΈ°λ° λ©”μ‹μ§€ ν•„ν„°λ§
- alias κΈ°λ° μ±„λ„ λ¶„λ°° (λ©€ν‹° μ±„λ„ μ‹)

---

## π¤– `SocketChat-Client.mjs` μ„¤λ…μ„

### π“¦ λ¨λ“ κ°μ”

μ΄ λ¨λ“μ€ μ„λ²„μ™€μ WebSocket ν†µμ‹ μ„ μ‰½κ² μ‚¬μ©ν•  μ μλ„λ΅ μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•©λ‹λ‹¤.

---

### π“¥ ν΄λΌμ΄μ–ΈνΈ μ„¤μ • λ°©λ²•

```js
connect("ws://localhost:3000", 1); // λ©€ν‹° μ±„λ„
connect("ws://localhost:3000", 0); // μ‹±κΈ€ μ±„λ„
```

---

### π“΅ λ‚΄λ³΄λ‚΄λ” ν•¨μ

#### `connect(url: string, mode: number): void`

- μ„λ²„ μ£Όμ†μ™€ λ¨λ“(λ©€ν‹°=1, μ‹±κΈ€=0)λ¥Ό κΈ°λ°μΌλ΅ μ„λ²„μ— μ—°κ²°ν•©λ‹λ‹¤.

> β οΈ μ‹¤μ λ°©μ§€λ¥Ό μ„ν•΄ μ ν¨μ„± κ²€μ‚¬λ” `console.warn()`μΌλ΅ μ•λ‚΄λ©λ‹λ‹¤.

#### `disconnect(): void`

- μ„λ²„μ™€μ WebSocket μ—°κ²°μ„ μΆ…λ£ν•©λ‹λ‹¤.

#### `getMessage(channel: number | null): { als, msg } | null`

- ν•΄λ‹Ή μ±„λ„μ λ§μ§€λ§‰ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.
- λ‹¨μΌ μ±„λ„ λ¨λ“μ—μ„λ” `null` μ „λ‹¬

#### `sendMessage(msg: string, alias: string, channel: number | null): void`

- λ©”μ‹μ§€λ¥Ό μ„λ²„λ΅ μ „μ†΅ν•©λ‹λ‹¤.
- λ‹¨μΌ μ±„λ„ λ¨λ“μ—μ„λ” `channel`μ— `null` μ „λ‹¬

```json
{
  "als": "λ³„λ…",
  "msg": "λ³΄λ‚Έ λ©”μ‹μ§€"
}
```

---

### β— μ£Όμμ‚¬ν•­

- ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—μ„ μ κ³µλ μΈμ¦ ν‚¤(`base64`)λ¥Ό μ•μ•„μ•Ό ν•©λ‹λ‹¤.
- μ±„λ„ λ²νΈλ” λ©€ν‹° μ±„λ„ λ¨λ“μ—μ„λ§ μ‚¬μ©λ©λ‹λ‹¤.
- μ„λ²„ μ—°κ²° μ΄μ „μ— λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ ¤ ν•λ©΄ κ²½κ³ κ°€ μ¶λ ¥λ©λ‹λ‹¤.

---

## π§ CLI κΈ°λ° μ‹¤ν–‰ νλ¦„ μμ‹

```bash
? μ„λ²„ μ£Όμ†λ”? β†’ ws://localhost:3000  
? λ¨λ“? β†’ λ©€ν‹° μ±„λ„  
? μ±„λ„ μλ”? β†’ 5  
? λ‚΄ λ³„λ…μ€? β†’ Henry  
? μ„λ²„ ν‚¤λ”? β†’ base64examplekey
```

---

## π“¤ ν†µμ‹  μμ‹

### 1. ν΄λΌμ΄μ–ΈνΈκ°€ λ©”μ‹μ§€ μ „μ†΅

```json
{
  "typ": "sed",
  "key": "base64examplekey",
  "cot": "μ•λ…•ν•μ„Έμ”!",
  "als": "Henry"
}
```

### 2. μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² λΈλ΅λ“μΊμ¤νΈ

```json
{
  "typ": "rev",
  "key": "base64examplekey",
  "cot": "μ•λ…•ν•μ„Έμ”!",
  "als": "Henry"
}
```

---

## π§Ύ μμ΅΄ λ¨λ“

- `ws` β€“ WebSocket μ„λ²„/ν΄λΌμ΄μ–ΈνΈ ν†µμ‹ 
- `readline`, `inquirer` β€“ CLI κΈ°λ° μ…λ ¥ μ²λ¦¬ (μ‚¬μ©μ μ •λ³΄ μ„¤μ •)

---

## β… μ „μ²΄ μ”μ•½

| ν•­λ© | μ„¤λ… |
|------|------|
| μΈμ¦ | base64 λ¬Έμμ—΄μ„ κΈ°λ°μΌλ΅ μ„λ²„ μΈμ¦ μν–‰ |
| μ±„λ„ | λ‹¨μΌ / λ©€ν‹° μ±„λ„ λ¨λ“ μ§€μ› |
| λ©”μ‹μ§€ μ²λ¦¬ | λ§μ§€λ§‰ λ©”μ‹μ§€ μ €μ¥, μ‹¤μ‹κ°„ λΈλ΅λ“μΊμ¤νΈ |
| μ‚¬μ©μ„± | ν΄λΌμ΄μ–ΈνΈ λ¨λ“λ΅ μ‰½κ² ν†µμ‹  κ°€λ¥ |
| μ»¤μ¤ν„°λ§μ΄μ§• | μ±„λ„ μ λ° λ³„λ… μμ  μ„¤μ • |

Made by Henry and AI